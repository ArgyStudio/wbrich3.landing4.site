<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Wonbet.vip ‚Äì Crea tu usuario</title>
  <link rel="icon" type="image/png" sizes="32x32" href="images/logo-1.png">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap"
    rel="stylesheet"
  />

  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>


  <style>
    body {
      visibility: hidden;
      margin: 0;
    }
    #preloader {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .carousel-track {
      display: flex;
      gap: 0.5rem;
      animation: scrollCarousel var(--duration, 28s) linear infinite;
    }
    @keyframes scrollCarousel {
      from { transform: translateX(0); }
      to   { transform: translateX(var(--scroll-end)); }
    }
  </style>


  <link rel="stylesheet" href="styles.css" />


  <script>
    const PIXEL_ID = '714515784691405';
    !function(f,b,e,v,n,t,s){
      if(f.fbq) return; n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq) f._fbq=n; n.push=n; n.loaded=!0; n.version='2.0';
      n.queue=[]; t=b.createElement(e); t.async=!0;
      t.src=v; s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s);
    }(window, document, 'script',
      'https://connect.facebook.net/en_US/fbevents.js'
    );
    fbq('init', PIXEL_ID);
    fbq('track', 'ViewContent');

    fbq('set', 'autoConfig', false, PIXEL_ID);

  </script>
</head>
<body>

  <div id="preloader">
    <lottie-player
      src="videos/slot-machine.json"
      background="transparent"
      speed="1"
      style="width:150px; height:150px;"
      autoplay
      loop
    ></lottie-player>
  </div>


 <a href="#" id="themeToggle" class="btn-shine">ArgyStudios</a>






  <div class="screen">
    <div class="card">
      <div class="logo">
       <img src="images/logo.png" alt="WhatsApp icon" class="icon" />
      </div>
      <h1 class="title">SUPER BONO DE BIENVENIDA 
        200% EXTRA</h1>
      <p class="subtitle">
        <img
  src="images/fire.png"
  alt="üî•"
  class="fire"
/>
        ESCRIB√ç TU NOMBRE Y CREA TU USUARIO
        <img
  src="images/fire.png"
  alt="üî•"
  class="fire"
/>
      </p>
      <p class="highlight">‚Üì TRIPLICA TU CARGA ‚Üì</p>
     <div class="input-group">
  <input
    type="text"
    id="username"
    placeholder="ESCRIB√ç TU NOMBRE"
    autocomplete="off"
  />
</div>

      <a href="#" id="ctaButton" class="btn">
        ¬°CREA TU USUARIO!
         <img src="images/whatsapp-icon.svg" alt="WhatsApp icon" class="icon" />
      </a>
    </div>


    <section class="carousel-section">
      <h2>POPULARES</h2>
      <div class="carousel">
<ul class="carousel-track" id="track">
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide1.png"  alt="Promoci√≥n bienvenida slide 1"          loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide2.jpg"  alt="Promoci√≥n bienvenida slide 2"          loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide3.jpg"  alt="Promoci√≥n bienvenida slide 3"          loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide4.gif"  alt="Promoci√≥n bienvenida slide 4"          loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide5.jpg"  alt="Promoci√≥n bienvenida slide 5"          loading="lazy" /></li>


  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide6.jpg"  alt="Promoci√≥n bienvenida slide 6"          loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide7.jpg"  alt="Promoci√≥n bienvenida slide 7"          loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide8.jpg"  alt="Promoci√≥n bienvenida slide 8"          loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide9.jpg"  alt="Promoci√≥n bienvenida slide 9"          loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide10.gif" alt="Promoci√≥n bienvenida slide 10"         loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide11.jpg" alt="Promoci√≥n bienvenida slide 11"         loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide12.jpg" alt="Promoci√≥n bienvenida slide 12"         loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide13.gif" alt="Animaci√≥n promocional slide 13"         loading="lazy" /></li>
  <li class="carousel-item"><div class="skeleton"></div><img src="images/slide14.jpg" alt="Promoci√≥n bienvenida slide 14"         loading="lazy" /></li>
    <li class="carousel-item"><div class="skeleton"></div><img src="images/slide15.jpg" alt="Promoci√≥n bienvenida slide 15"         loading="lazy" /></li>
      <li class="carousel-item"><div class="skeleton"></div><img src="images/slide16.jpg" alt="Promoci√≥n bienvenida slide 16"         loading="lazy" /></li>

</ul>
      </div>
      <div class="dots" id="dots"></div>
    </section>


    <section class="testimonials-section">
      <h2>LO QUE DICEN NUESTROS USUARIOS</h2>
      <div class="testimonials-carousel" id="testimonialsCarousel">

      </div>
    </section>
  </div>
 







  <script>
    function parseCookies() {
      return document.cookie.split('; ').reduce((acc, kv) => {
        const [k, ...vals] = kv.split('=');
        acc[k] = vals.join('=');
        return acc;
      }, {});
    }
    function waitForCookie(name, timeout = 3000) {
      return new Promise(res => {
        const start = Date.now();
        (function check() {
          if (
            document.cookie.split('; ').some(c => c.startsWith(name + '=')) ||
            Date.now() - start > timeout
          ) return res();
          requestAnimationFrame(check);
        })();
      });
    }


function getVisitorId() {
  return FingerprintJS.load()
    .then(fp => fp.get())
    .then(result => result.visitorId)
    .catch(err => {
      console.warn('No se pudo obtener visitorId:', err);
      return null;
    });
}

  const VERIFY_API = 'https://qm8se4sao4.execute-api.us-east-2.amazonaws.com/prod/ID-Visit';

  async function getVisitorId() {
    return FingerprintJS.load()
      .then(fp => fp.get())
      .then(res => res.visitorId)
      .catch(() => null);
  }

  async function verifyVisitor(visitorId) {
    const landingUrl = window.location.href;
    const resp = await fetch(VERIFY_API, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ visitorId, landingUrl })
    });
    if (!resp.ok) throw new Error(`Verify error: ${resp.status}`);
    return resp.json(); 
  }


window.addEventListener('load', async () => {

  document.getElementById('ctaButton').addEventListener('click', async e => {
  e.preventDefault();
  const name = document.getElementById('username').value.trim();
  if (!name) {
    const inp = document.getElementById('username');
    inp.classList.add('shake');
    return setTimeout(() => inp.classList.remove('shake'), 500);
  }


  document.body.querySelectorAll('body > *').forEach(el => {
    if (el.id !== 'preloader') el.style.display = 'none';
  });


  await Promise.all([waitForCookie('_fbc'), waitForCookie('_fbp')]);
  const { _fbc: fbc = null, _fbp: fbp = null } = parseCookies();


  const resp = await fetch(
    'https://t6cq896p7i.execute-api.us-east-2.amazonaws.com/prod/active-line',
    {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ subdomain: 'wbrich3', fbc, fbp })
    }
  );
  if (!resp.ok) throw new Error(`LineManager error: ${resp.status}`);
  const { whatsapp_number: number, uuid } = await resp.json();


const visitorId = await getVisitorId();
const { allowTracking } = await verifyVisitor(visitorId);

if (allowTracking) {
  const SECONDARY_API = 'https://u133u4wl4i.execute-api.us-east-2.amazonaws.com/prod/F1-WBRICH3';
  const EventPayload = {
    uuid,
    name,
    timestamp: new Date().toISOString(),
    subdomain: 'wbrich3'
  };
  fetch(SECONDARY_API, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(EventPayload)
  }).catch(console.error);
}


    const msg = `Hola, vengo por el bono de bienvenida! Mi c√≥digo promocional es: ${uuid}
    Este es mi nombre para el usuario: ${name}`;

    window.location.href = `https://wa.me/${number}?text=${encodeURIComponent(msg)}`;
  });



      const tog = document.getElementById('themeToggle');
      tog.addEventListener('click', () => {
        document.documentElement.classList.toggle('light');
        tog.textContent = document.documentElement.classList.contains('light') ? 'üåû' : 'üåô';
      });


      const pre = document.getElementById('preloader');
      pre.style.transition = 'opacity 0.5s ease';
      pre.style.opacity = '0';
      setTimeout(() => pre.remove(), 500);
      document.body.style.visibility = 'visible';
    });
  </script>


  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const track      = document.getElementById('track');
      const carousel   = document.querySelector('.carousel');
      const slides     = Array.from(track.children);
      const slideWidth = slides[0].getBoundingClientRect().width;
      const trackGap   = parseFloat(getComputedStyle(track).gap);

      const visibleCount = Math.ceil(
        carousel.clientWidth / (slideWidth + trackGap)
      ) + 1;

      for (let i = 0; i < visibleCount; i++) {
        const clone = slides[i % slides.length].cloneNode(true);
        track.appendChild(clone);
      }

      const originalWidth = slides.length * (slideWidth + trackGap);
      track.style.setProperty('--scroll-end', `-${originalWidth}px`);
      track.style.setProperty('--duration', `${slides.length * 2}s`);
      track.style.animation = `scrollCarousel var(--duration) linear infinite`;
    });
  </script>
  <script src="testimonials-carousel.js" defer></script>
</body>
</html>
